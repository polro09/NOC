<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SDT 오버레이</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="modal-styles.css">
</head>
<body class="main-page">
  <div class="overlay-container">
    <!-- 상단 헤더 (드래그 가능 영역) -->
    <div class="header" id="header">
      <span class="title">WOSB</span>
      <div class="header-controls">
        <button class="header-btn close" id="closeBtn" title="닫기">×</button>
      </div>
    </div>

    <div class="content-wrapper">
      <!-- 왼쪽 사이드바 -->
      <div class="sidebar">
        <!-- 사용자 프로필 -->
        <div class="user-profile" id="userProfile">
          <div class="profile-avatar">
            <img src="../assets/logo.png" alt="Profile" id="profileAvatar">
          </div>
          <div class="profile-info">
            <div class="profile-name" id="profileName">사용자</div>
            <div class="profile-status" id="profileStatus">온라인</div>
          </div>
          <button class="profile-expand-btn" id="profileExpandBtn">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </button>
        </div>

        <!-- 길드 리스트 -->
        <div class="list-section">
          <div class="list-header">
            <h3>길드 리스트</h3>
            <button class="add-btn" id="addGuildBtn" title="길드 등록">+</button>
          </div>
          <div class="guild-list" id="guildList">
            <!-- 길드 아이템들이 동적으로 추가됨 -->
          </div>
        </div>
      </div>

      <!-- 오른쪽 메인 콘텐츠 -->
      <div class="main-content">
        <!-- 상단 40%: 배경 이미지 -->
        <div class="background-section">
        </div>

        <!-- 하단 60%: 채널 리스트 -->
        <div class="channel-section">
          <div class="list-header">
            <h3>채널 리스트</h3>
            <button class="add-btn" id="addChannelBtn" title="채널 등록">+</button>
          </div>
          <div class="channel-list" id="channelList">
            <!-- 채널 아이템들이 동적으로 추가됨 -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 사용자 프로필 상세 모달 -->
  <div class="modal" id="profileModal" style="display: none;">
    <div class="modal-content profile-detail">
      <div class="modal-header">
        <h2>사용자 프로필</h2>
        <button class="modal-close" id="closeProfileModal">×</button>
      </div>
      <div class="modal-body">
        <div class="profile-detail-avatar">
          <img src="../assets/logo.png" alt="Profile" id="profileDetailAvatar">
        </div>
        <div class="profile-detail-info">
          <div class="form-group">
            <label>디스코드 사용자 ID</label>
            <input type="text" id="discordId" readonly>
          </div>
          <div class="form-group">
            <label>사용자 닉네임</label>
            <div class="input-with-btn">
              <input type="text" id="discordNickname" readonly>
              <button class="secondary-btn" id="editDiscordBtn">변경</button>
            </div>
          </div>
          <div class="form-group">
            <label>소속 길드</label>
            <div class="input-with-btn">
              <input type="text" id="userGuild" readonly>
              <button class="secondary-btn" id="editGuildBtn">변경</button>
            </div>
          </div>
        </div>
        <button class="logout-btn" id="logoutBtn">로그아웃</button>
      </div>
    </div>
  </div>

  <!-- ✅ 닉네임 변경 커스텀 모달 -->
  <div class="modal" id="nicknameModal" style="display: none;">
    <div class="modal-content" style="max-width: 400px;">
      <div class="modal-header">
        <h2>닉네임 변경</h2>
        <button class="modal-close" id="closeNicknameModal">×</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>새로운 닉네임을 입력하세요</label>
          <input type="text" id="newNicknameInput" placeholder="닉네임 입력" maxlength="20">
        </div>
        <div class="modal-buttons">
          <button class="submit-btn" id="confirmNicknameBtn">확인</button>
          <button class="cancel-btn" id="cancelNicknameBtn">취소</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ✅ 길드 선택 커스텀 모달 -->
  <div class="modal" id="guildSelectModal" style="display: none;">
    <div class="modal-content" style="max-width: 450px;">
      <div class="modal-header">
        <h2>소속 길드 변경</h2>
        <button class="modal-close" id="closeGuildSelectModal">×</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>소속 길드를 선택하세요</label>
          <div class="guild-select-list" id="guildSelectList">
            <!-- 길드 목록이 동적으로 추가됨 -->
          </div>
        </div>
        <div class="modal-buttons">
          <button class="submit-btn" id="confirmGuildSelectBtn">확인</button>
          <button class="cancel-btn" id="cancelGuildSelectBtn">취소</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 길드 등록/수정 모달 -->
  <div class="modal" id="addGuildModal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="guildModalTitle">길드 게시판 등록</h2>
        <button class="modal-close" id="closeGuildModal">×</button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="guildEditId">
        <div class="form-group">
          <label>길드 로고</label>
          <input type="file" id="guildLogo" accept="image/*">
          <div class="logo-preview" id="guildLogoPreview" style="display: none;">
            <img id="guildLogoPreviewImg" src="" alt="로고 미리보기">
          </div>
        </div>
        <div class="form-group">
          <label>길드 약어</label>
          <div class="input-with-color">
            <input type="text" id="guildShortName" placeholder="길드 약어를 입력하세요 (예: SDT)">
            <input type="color" id="guildShortNameColor" value="#667eea" title="약어 색상 선택">
          </div>
          <small style="color: #888; font-size: 11px;">약어 색상은 길드 리스트와 채팅에서 표시됩니다.</small>
        </div>
        <div class="form-group">
          <label>길드 이름</label>
          <input type="text" id="guildName" placeholder="길드 전체 이름을 입력하세요">
        </div>
        <div class="form-group">
          <label>길드 진영</label>
          <select id="guildFaction">
            <option value="">진영을 선택하세요</option>
            <option value="소함대">소함대</option>
            <option value="무역연합">무역연합</option>
            <option value="해적">해적</option>
            <option value="안틸리아">안틸리아</option>
            <option value="에스파니올">에스파니올</option>
            <option value="카이 & 세베리아">카이 & 세베리아</option>
          </select>
        </div>
        <div class="form-group">
          <label>모집 상태</label>
          <select id="guildRecruitment">
            <option value="모집중">모집중</option>
            <option value="모집 마감">모집 마감</option>
          </select>
        </div>
        <div class="form-group">
          <label>길드 설명</label>
          <textarea id="guildDescription" rows="4" placeholder="길드 소개를 입력하세요"></textarea>
        </div>
        <div class="form-group">
          <label>연락처 (디스코드)</label>
          <input type="text" id="guildContact" placeholder="디스코드 ID 또는 서버 링크">
        </div>
        <button class="submit-btn" id="submitGuild">등록</button>
      </div>
    </div>
  </div>

  <!-- 채널 등록/수정 모달 -->
  <div class="modal" id="addChannelModal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="channelModalTitle">채팅 채널 등록</h2>
        <button class="modal-close" id="closeChannelModal">×</button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="channelEditId">
        <div class="form-group">
          <label>채널 로고</label>
          <input type="file" id="channelLogo" accept="image/*">
          <div class="logo-preview" id="channelLogoPreview" style="display: none;">
            <img id="channelLogoPreviewImg" src="" alt="로고 미리보기">
          </div>
        </div>
        <div class="form-group">
          <label>채널명</label>
          <input type="text" id="channelName" placeholder="채널 이름을 입력하세요">
        </div>
        <div class="form-group">
          <label>비밀번호 (선택)</label>
          <input type="password" id="channelPassword" placeholder="비밀번호를 설정하지 않으면 공개 채널입니다">
        </div>
        <button class="submit-btn" id="submitChannel">등록</button>
      </div>
    </div>
  </div>

  <!-- 삭제 확인 모달 -->
  <div class="modal" id="deleteConfirmModal" style="display: none;">
    <div class="modal-content delete-confirm">
      <div class="modal-header">
        <h2>삭제 확인</h2>
        <button class="modal-close" id="closeDeleteModal">×</button>
      </div>
      <div class="modal-body">
        <p id="deleteConfirmMessage">정말 삭제하시겠습니까?</p>
        <div class="modal-buttons">
          <button class="delete-btn" id="confirmDelete">삭제</button>
          <button class="cancel-btn" id="cancelDelete">취소</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 길드 상세 모달 -->
  <div class="modal" id="guildDetailModal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>길드 정보</h2>
        <button class="modal-close" id="closeGuildDetailModal">×</button>
      </div>
      <div class="modal-body">
        <div class="guild-detail-header">
          <div class="guild-detail-logo" id="guildDetailLogo">
            <!-- 로고 이미지 -->
          </div>
          <div class="guild-detail-names">
            <div class="guild-detail-short" id="guildDetailShort">SDT</div>
            <div class="guild-detail-full" id="guildDetailFull">길드 전체 이름</div>
            <div class="guild-detail-faction" id="guildDetailFaction">진영</div>
          </div>
        </div>
        <div class="guild-detail-info">
          <div class="form-group">
            <label>모집 상태</label>
            <div class="guild-detail-value" id="guildDetailRecruitment">모집중</div>
          </div>
          <div class="form-group">
            <label>길드 설명</label>
            <div class="guild-detail-value" id="guildDetailDescription">-</div>
          </div>
          <div class="form-group">
            <label>연락처 (디스코드)</label>
            <div class="guild-detail-value" id="guildDetailContact">-</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="overlay.js"></script>
</body>
</html>